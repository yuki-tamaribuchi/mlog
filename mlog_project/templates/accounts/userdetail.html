{% extends 'base.html' %}
{% block title%} {{detail_user.handle}} ({{detail_user.username}}) | {{block.super}}{% endblock title %}
{% block content %}
<div class="container">
	<div class="row mt-5">
		<div class="col text-center">
			<h1>{{detail_user.handle}} ({{detail_user.username}})</h1>
			<img src="{{MEDIA_URL}}{{detail_user.profile_image}}" class="profile-image profile-image-size-lg"/>
		</div>

		<div class="col pt-5">
			{% if detail_user.biograph %}
			<p>{{detail_user.biograph}}</p>
			{% else %}
			<p>自己紹介が入力されていません。</p>
			{% endif %}

			<p><a href="{% url 'follow:following' detail_user.username %}">{{follow_count}}フォロー</a> | <a href="{% url 'follow:follower' detail_user.username %}"> {{follower_count}}フォロワー</a></p>

			{% if not is_myself %}
				{% if user.username %}
				<form action="{% url 'follow:process' %}" method="POST">
					{% csrf_token %}
					<input type="hidden" name='username' value="{{detail_user.username}}">
					<input type="submit" value="{% if is_following %}フォローをやめる{% else %}フォローする{% endif %}">
				</form>
				{% else %}
				<a href="{% url 'accounts:login' %}"><input type="button" value="フォローする"></a>
				{% endif %}
			{% endif %}
			<div class="mt-5">
				<p><a href="{% url 'likes:user_list' detail_user.username %}">ライクした記事({{liked_entry_count}})</a></p>
				<p><a href="{% url 'favorite_artists:favoriteartist' detail_user.username %}">お気に入りアーティスト一覧</a></p>
			</div>
		</div>

		<div class="row mt-5">
			<h2>投稿</h2>
			{% if entries %}
			{% for entry in entries %}
			<div class="card m-3 entry-list-card text-center">
				<div class="card-body">
					<div class="row">
						<div class="col">
							<a href="{% url 'entry:detail' entry.id %}"><h4 class="card-title">{{entry.title}}</h4></a>
						</div>
	
						<div class="col">
							<p>Song:<a href="{% url 'musics:song_detail' entry.song.id %}" class="card-link">{{entry.song.song_name}}</a></p>
							<p>Artist:{% for artist in entry.song.artist.all %}<a href="{% url 'musics:artist_detail' artist.artist_name_id %}" class="card-link">{{artist.artist_name}} </a>{% endfor %}</p>
						</div>
					</div>
					
					
				</div>
			</div>	
			{% endfor %}
			<p><a href="{% url 'accounts:userentrylist' detail_user.username %}">もっと見る</a></p>
			{% else %}
			表示する記事がありません。
			{% endif %}
		</div>
	</div>
</div>
{% endblock content %}