{% extends 'base.html' %}
{% block title%}{{entry.title}} | {{block.super}}{% endblock title %}
{% block content %}
<div class="container text-white">
	<div class "row mt-5">
		<div class="row">
			<div class="col">
				<h2>{{entry.title}}</h2>
				<a href="{% url 'accounts:detail' entry.writer %}" style="font-size: large;" class="text-decoration-none text-white">
				<img src="{{MEDIA_URL}}{{entry.writer.profile_image}}" height="{{profile_image_size.HEIGHT}}" width="{{profile_image_size.WIDTH}}" class="profile-image" />
				{{entry.writer.handle}} ({{entry.writer.username}})
				</a>
			</div>
		</div>
		
		<div class="row my-5">
			{{entry.content|linebreaks}}
			<p>Date:{{entry.date}}</p>
		</div>

		<div class="row mb-3">
			<h3>Featured Song</h3>
			<div class="col">
				<div class="card text-center song-card" style="width: 15rem;">
					<div class="card-body">
						<a href="{% url 'musics:song_detail' entry.song.id %}" class="stretched-link text-decoration-none">{{entry.song.song_name}}</a>
					</div>
				</div>
			</div>
		</div>

		<div class="row mb-3">
			<h3>Featured Artist</h3>
			<div class="row">
				{% for artist in entry.song.artist.all %}
				<div class="col">
					<div class="card text-center artist-card" style="width: 10rem;">
						<div class="card-body">
							<a href="{% url 'musics:artist_detail' artist.artist_name_id %}" class="stretched-link text-decoration-none">{{artist.artist_name}}</a>
						</div>
					</div>
				</div>
				{% endfor %}
			</div>
		</div>

		<div class="row mb-3">
			<div class="col"><a href="{% url 'likes:entry_list' entry.id %}">Like:{{like_count}}</a></div>
			<div class="col"><a href="{% url 'comments:list' entry.id %}">Comment:{{comment_count}}</a></div>
			<div class="col"><p>Views:{{view_count}}</p></div>	
		</div>

		<div class="row mb-3">
			<div class="col"><a href="{% url 'comments:create' entry.id %}"><input type="button" value="コメントする"></a></div>
			<div class="col">
				<form action="{% url 'likes:process' %}" method="POST">
				{% csrf_token %}
				<input type="hidden" name='pk' value="{{entry.id}}">
				<input type="submit" value="{% if like_status %}Unlike{% else %}Like{% endif %}">
			</form>				
			</div>
		</div>

		<div col="row">
			{% if entry.writer.username == user.username %}
			<a href="{% url 'entry:delete' entry.id %}"><input type="button" value="削除する"></a>
			{% endif %}
		</div>
	</div>
</div>
{% endblock content %}